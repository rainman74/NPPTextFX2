 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/SRC/NPPTextFX.cpp b/SRC/NPPTextFX.cpp
index 9aa8921e21b30ab68091a9354610d533cb1e0720..d7f6f0f33b28df1071649f3c92d319af57c65d57 100644
--- a/SRC/NPPTextFX.cpp
+++ b/SRC/NPPTextFX.cpp
@@ -5527,51 +5527,51 @@ EXTERNC void vizinvertselectedalllines(char reveal) {
         sarmprintf(&g_pszVizSequence,&g_uVizSz,&g_uVizLen,"%c[%d-%d]\r\n",reveal,L1,L2);
   }
   robotvizinvert(currentEdit,reveal,curline+1,L1,L2);
   SENDMSGTOCED(currentEdit, SCI_GOTOPOS, curpos,0);
 }
 EXTERNC PFUNCPLUGINCMD pfvizhideselectedalllines(void) { vizinvertselectedalllines('-'); }
 EXTERNC PFUNCPLUGINCMD pfvizshowselectedalllines(void) { vizinvertselectedalllines('+'); }
 EXTERNC PFUNCPLUGINCMD pfvizinvertselectedalllines(void){vizinvertselectedalllines('!'); }
 
 // new feature: show container lines with text at column 0
 // new feature: gutter width, how many lines around the found text get displayed?
 EXTERNC BOOL robothidecliplines(INT_CURRENTEDIT,char *str,char reveal,BOOL complementary,unsigned searchflags) {
 #define FLAG_CONTINUE 1
 #define FLAG_FIRST 2
   BOOL rv=TRUE;
 
   if (str) {
     //MessageBoxFree(g_nppData._nppHandle,smprintf("%c%s%s Searching for %s",reveal,complementary?" complementary":"",casesensitive?" casesensitive":"",str),PLUGIN_NAME, MB_OK|MB_ICONINFORMATION);
     struct TextToFind tr;
     tr.chrg.cpMin=0; tr.chrg.cpMax=SENDMSGTOCED(currentEdit, SCI_GETLENGTH,0,0); tr.lpstrText=str;
     int curpos=SENDMSGTOCED(currentEdit, SCI_GETCURRENTPOS, 0, 0);
     int curline=SENDMSGTOCED(currentEdit, SCI_LINEFROMPOSITION,curpos,0);
     unsigned flags=FLAG_FIRST; do {
       int L1=SENDMSGTOCED(currentEdit, SCI_LINEFROMPOSITION,tr.chrg.cpMin,0);
       if (SENDMSGTOCED(currentEdit, SCI_FINDTEXT,searchflags,&tr)>=0) flags |= FLAG_CONTINUE; else flags &= ~FLAG_CONTINUE;
-      if ((flags&(FLAG_FIRST|FLAG_CONTINUE)) == FLAG_FIRST /* halt when first search fails */) {MessageBox(g_nppData._nppHandle,"I'm not going to hide all the lines! Copy something to the Clipboard that can be found!",PLUGIN_NAME, MB_OK||MB_ICONSTOP); rv=FALSE; break;}
+      if ((flags&(FLAG_FIRST|FLAG_CONTINUE)) == FLAG_FIRST /* halt when first search fails */) {MessageBox(g_nppData._nppHandle,"I'm not going to hide all the lines! Copy something to the Clipboard that can be found!",PLUGIN_NAME, MB_OK|MB_ICONSTOP); rv=FALSE; break;}
       int L2=SENDMSGTOCED(currentEdit, SCI_LINEFROMPOSITION,((flags&FLAG_CONTINUE)?tr.chrgText.cpMin:tr.chrg.cpMax),0);
       if (reveal=='+') {
         if (!complementary) L2=L1;
         SENDMSGTOCED(currentEdit, SCI_SHOWLINES,L1,L2);
       } else {
         if (complementary) hidelinerange(currentEdit,curline,L1+1 /* This shouldn't always be +1 but thanks to Scintilla not allowing us to hide line 0, it is! */,L2-((flags&FLAG_CONTINUE)?1:0));
         else if (L1 != curline) SENDMSGTOCED(currentEdit, SCI_HIDELINES,L1,L1);
       }
       tr.chrg.cpMin=tr.chrgText.cpMax;
       flags &= ~FLAG_FIRST;
     } while(flags&FLAG_CONTINUE);
     SENDMSGTOCED(currentEdit, SCI_GOTOPOS, curpos,0);
   }
   return(rv);
 #undef FLAG_CONTINUE
 #undef FLAG_FIRST
 }
 
 EXTERNC void vizcliplines(char reveal,BOOL complementary,unsigned searchflags) {
         char *va;
 
   INT_CURRENTEDIT; GET_CURRENTEDIT;
         if ((va=strdupClipboardText(NULL,(IsScintillaUnicode(currentEdit)?SCDS_UNICODEMODE:0),SENDMSGTOCED(currentEdit, SCI_GETEOLMODE, 0, 0),NULL))) {
                 int pr=strcspn(va,"\r\n");
                 if (va[pr]!='\0') MessageBox(g_nppData._nppHandle,"Search text cannot contain end of line characters",PLUGIN_NAME, MB_OK|MB_ICONINFORMATION);
@@ -5662,182 +5662,182 @@ EXTERNC PFUNCPLUGINCMD pfvizsequencenext(void){
         g_pszVizSequence[g_uVisPos=eol]=chtemp;
         while(g_pszVizSequence[g_uVisPos]=='\r' || g_pszVizSequence[g_uVisPos]=='\n') g_uVisPos++;
   SENDMSGTOCED(currentEdit, SCI_GOTOPOS, curpos,0);
 }
 
 EXTERNC PFUNCPLUGINCMD pfvizsequencerest(void){
         if (!g_pszVizSequence) MessageBox(g_nppData._nppHandle,"You have not performed any show hide operations since your last Show All Lines",PLUGIN_NAME, MB_OK|MB_ICONINFORMATION);
         else while(g_pszVizSequence[g_uVisPos]) pfvizsequencenext();
 }
 
 EXTERNC PFUNCPLUGINCMD pfvizsequencestart(void) {
   INT_CURRENTEDIT; GET_CURRENTEDIT;
   int curpos=SENDMSGTOCED(currentEdit, SCI_GETCURRENTPOS, 0, 0);
         g_uVisPos=0; // we can do this even if the sequence is invalid
         robotvizinvert(currentEdit,'+',0,0,0);
   SENDMSGTOCED(currentEdit, SCI_GOTOPOS, curpos,0);
 }
 
 EXTERNC PFUNCPLUGINCMD pfvizsequenceall(void){
         pfvizsequencestart();
         pfvizsequencerest();
 }
 
 EXTERNC PFUNCPLUGINCMD pfvizselectassequence(void){
   INT_CURRENTEDIT; GET_CURRENTEDIT;
-  char *rv,*end;
+  char *rv;
   unsigned st,ln;
   if ((st=SENDMSGTOCED(currentEdit, SCI_GETSELTEXT, 0, NULL))>1 && (rv=(char *)mallocsafe(st,"pfvizselectassequence")) ) {
         SENDMSGTOCED(currentEdit, SCI_GETSELTEXT, 0, rv);
         if ((ln=strlen(rv))) {
-          for(end=rv+ln-1; end>=rv; end--) if (*end=='\r' || *end=='\n') *end='\0';  // trim off eol that the user may or may not have included
+          while(ln && (rv[ln-1]=='\r' || rv[ln-1]=='\n')) rv[--ln]='\0'; // trim off eol that the user may or may not have included
       if ((ln=strlen(rv))) {
         if (g_pszVizSequence) freesafe(g_pszVizSequence,"pfvizselectassequence");
         g_pszVizSequence=rv;
         g_uVizSz=st;
         g_uVizLen=ln;
         strcpyarmsafe(&g_pszVizSequence,&g_uVizSz,&g_uVizLen,"\r\n","pfvizselectassequence"); // guarantee a \r\n ending
         pfvizsequencestart();
       }
         }
   } else MessageBox(g_nppData._nppHandle,"No text selected",PLUGIN_NAME, MB_OK|MB_ICONSTOP);
 }
 
 // which: *=all lines, +:visible only, -:invisible only
 BOOL g_fVizClipboardAlwaysCRLF=FALSE;
 BOOL g_fVizClipboardReplaceNulls=FALSE;
 BOOL g_fVizClipboardCopyAlsoUTF8=FALSE;
 BOOL g_fVizClipboardNotUnicode=FALSE;
 BOOL g_fVizPasteBinary=FALSE;
 BOOL g_fVizPasteToEditorEOL=TRUE;
 EXTERNC void copycutdeletevisible(unsigned flags,char which) {
   INT_CURRENTEDIT; GET_CURRENTEDIT;
   char *buf=NULL; unsigned bufsz=0,buflen;
-  unsigned *lps=NULL,*lpe=NULL; unsigned lpssz=0,lpesz=0,lplen;
-  int p1=SENDMSGTOCED(currentEdit, SCI_GETSELECTIONSTART, 0, 0);
-  int p2=SENDMSGTOCED(currentEdit, SCI_GETSELECTIONEND, 0, 0);
+  Sci_Position *lps=NULL,*lpe=NULL; unsigned lpssz=0,lpesz=0,lplen;
+  Sci_Position p1=SENDMSGTOCED(currentEdit, SCI_GETSELECTIONSTART, 0, 0);
+  Sci_Position p2=SENDMSGTOCED(currentEdit, SCI_GETSELECTIONEND, 0, 0);
   if (p1<p2) {
     unsigned eoltype=SENDMSGTOCED(currentEdit, SCI_GETEOLMODE, 0, 0);
     if (eoltype>=NELEM(eoltypes)) eoltype=NELEM(eoltypes)-1;
     if (SENDMSGTOCED(currentEdit, SCI_SELECTIONISRECTANGLE, 0, 0)) flags |= SCDS_COPYRECTANGULAR; else flags &= ~SCDS_COPYRECTANGULAR;
-    unsigned blockstart=SENDMSGTOCED(currentEdit, SCI_LINEFROMPOSITION,p1, 0);
-    unsigned blocklines=SENDMSGTOCED(currentEdit, SCI_LINEFROMPOSITION,p2, 0)-blockstart+1;
+    int blockstart=SENDMSGTOCED(currentEdit, SCI_LINEFROMPOSITION,p1, 0);
+    int blocklines=SENDMSGTOCED(currentEdit, SCI_LINEFROMPOSITION,p2, 0)-blockstart+1;
     unsigned ln; for(lplen=ln=0; ln<blocklines; ln++) {
         int vis=SENDMSGTOCED(currentEdit, SCI_GETLINEVISIBLE, (blockstart+ln),0);
         if (which=='*' || (vis && which=='+') || (!vis && which=='-')){
-        unsigned ls; if ((unsigned)INVALID_POSITION==(ls=SENDMSGTOCED(currentEdit, SCI_GETLINESELSTARTPOSITION, (blockstart+ln),0))) continue;
-        unsigned le; if ((unsigned)INVALID_POSITION==(le=SENDMSGTOCED(currentEdit, SCI_GETLINESELENDPOSITION, (blockstart+ln),0))) continue;
+        Sci_Position ls=SENDMSGTOCED(currentEdit, SCI_GETLINESELSTARTPOSITION, (blockstart+ln),0); if (INVALID_POSITION==ls) continue;
+        Sci_Position le=SENDMSGTOCED(currentEdit, SCI_GETLINESELENDPOSITION, (blockstart+ln),0); if (INVALID_POSITION==le) continue;
         if (!lplen || lpe[lplen-1]!=ls) {
           armreallocsafe((char **)&lps,&lpssz,(lplen+1)*sizeof(*lps),ARMSTRATEGY_INCREASE,0,"pfvizcopyvisible"); if (!lps) goto failbreak;
           armreallocsafe((char **)&lpe,&lpesz,(lplen+1)*sizeof(*lps),ARMSTRATEGY_INCREASE,0,"pfvizcopyvisible"); if (!lpe) goto failbreak;
           lps[lplen]=ls;
           lpe[lplen]=le;
           lplen++;
           //MessageBoxFree(g_nppData._nppHandle,smprintf("[%u] %s line:%u from:%u to:%u",lplen,"Added New",blockstart+ln+1,ls,le),PLUGIN_NAME, MB_OK|MB_ICONINFORMATION);
         } else {
           lpe[lplen-1]=le;
           //MessageBoxFree(g_nppData._nppHandle,smprintf("[%u] %s line:%u from:%u to:%u",lplen,"Appended",blockstart+ln+1,ls,le),PLUGIN_NAME, MB_OK|MB_ICONINFORMATION);
         }
         }
     }
     if (!lplen) goto failmessage;
     if (flags & SCDS_COPY) {
         for(buflen=0,ln=0; ln<lplen; ln++) {
         struct TextRange tr;
         tr.chrg.cpMin= lps[ln];
         tr.chrg.cpMax= lpe[ln];
         //MessageBoxFree(g_nppData._nppHandle,smprintf("[%u] Copy from:%u to:%u",ln,tr.chrg.cpMin,tr.chrg.cpMax),PLUGIN_NAME, MB_OK|MB_ICONINFORMATION);
         armreallocsafe(&buf,&bufsz,buflen+tr.chrg.cpMax-tr.chrg.cpMin+1,ARMSTRATEGY_INCREASE,0,"pfvizcopyvisible"); if (!buf) goto failbreak;
         tr.lpstrText=buf+buflen; buflen += SENDMSGTOCED(currentEdit, SCI_GETTEXTRANGE,0,&tr);
         if (flags&SCDS_COPYRECTANGULAR) {
           strcpyarmsafe(&buf,&bufsz,&buflen,eoltypes[eoltype],"pfvizcopyvisible"); if (!buf) goto failbreak;
         }
         }
       if (!buflen) goto failmessage;
       if (!SetClipboardDataSingle(&buf,&bufsz,&buflen,flags|
         (g_fVizClipboardAlwaysCRLF?SCDS_COPYEOLALWAYSCRLF:0)|
         (g_fVizClipboardReplaceNulls?SCDS_COPYCONVERTNULLSTOSPACE:0)|
         (g_fVizClipboardCopyAlsoUTF8?SCDS_COPYALSOUTF8:0)|
         (g_fVizClipboardNotUnicode?SCDS_COPYNOTUNICODE:0)|
         (g_fVizPasteBinary?SCDS_COPYPASTEBINARY:0)|
         (g_fVizPasteToEditorEOL?SCDS_PASTETOEDITOREOL:0)|
         (SENDMSGTOCED(currentEdit, SCI_SELECTIONISRECTANGLE, 0, 0)?SCDS_COPYRECTANGULAR:0)|
         (IsScintillaUnicode(currentEdit)?SCDS_UNICODEMODE:0)
         ,SENDMSGTOCED(currentEdit, SCI_GETEOLMODE, 0, 0)) ) goto failbreak;
     }
     if (flags & SCDS_DELETE) {
-      unsigned curpos=SENDMSGTOCED(currentEdit, SCI_GETCURRENTPOS, 0, 0);
+      Sci_Position curpos=SENDMSGTOCED(currentEdit, SCI_GETCURRENTPOS, 0, 0);
       SENDMSGTOCED(currentEdit, SCI_BEGINUNDOACTION, 0, 0);
         for(ln=lplen; ln>0; ln--) {
                 SENDMSGTOCED(currentEdit, SCI_SETTARGETSTART,lps[ln-1],0);
                 SENDMSGTOCED(currentEdit, SCI_SETTARGETEND,lpe[ln-1],0);
                 SENDMSGTOCED(currentEdit, SCI_REPLACETARGET,0,"");
 				if (curpos>=lpe[ln-1]) {						//MODIF Harry: first check if out of entire selection range
 					curpos -= lpe[ln-1]-lps[ln-1];
 				} else if (curpos>lps[ln-1]) {					//MODIF Harry: >= to >, position not affected if selection starts at that position (this is the original check)
 					curpos -= (curpos-lps[ln-1]);				//Only subtract difference
 				}
         }
       SENDMSGTOCED(currentEdit, SCI_GOTOPOS, curpos,0);
       SENDMSGTOCED(currentEdit, SCI_ENDUNDOACTION, 0, 0);
     }
   } else {
 //failmessage: ;
     //MessageBox(g_nppData._nppHandle,"No text selected",PLUGIN_NAME, MB_OK|MB_ICONINFORMATION);
   }
 failmessage:
 failbreak:
   if (buf) freesafe(buf,"pfvizcopyvisible");
   if (lps) freesafe(lps,"pfvizcopyvisible");
   if (lpe) freesafe(lpe,"pfvizcopyvisible");
 }
 
 EXTERNC PFUNCPLUGINCMD pfcopyallnoappend(void)    {copycutdeletevisible(SCDS_COPY,'*');}
 EXTERNC PFUNCPLUGINCMD pfcopyallappend(void)      {copycutdeletevisible(SCDS_COPYAPPEND|SCDS_COPY,'*');}
 EXTERNC PFUNCPLUGINCMD pfcutallnoappend(void)     {copycutdeletevisible(SCDS_COPY|SCDS_DELETE,'*');}
 EXTERNC PFUNCPLUGINCMD pfcutallappend(void)       {copycutdeletevisible(SCDS_COPYAPPEND|SCDS_COPY|SCDS_DELETE,'*');}
 //EXTERNC PFUNCPLUGINCMD pfdeleteall(void) {copycutdeletevisible(SCDS_DELETE,'*');} // Copyall and cutall are there for append and other features. Delete gets nothing from append!
 EXTERNC PFUNCPLUGINCMD pfvizdeletevisible(void)   {copycutdeletevisible(SCDS_DELETE,'+');}
 EXTERNC PFUNCPLUGINCMD pfvizdeleteinvisible(void) {copycutdeletevisible(SCDS_DELETE,'-');}
 BOOL g_fVizCutCopyAppend=FALSE;
 EXTERNC PFUNCPLUGINCMD pfvizcopyvisible(void)     {copycutdeletevisible(SCDS_COPY|(g_fVizCutCopyAppend?SCDS_COPYAPPEND:0),'+');}
 EXTERNC PFUNCPLUGINCMD pfvizcutvisible(void)      {copycutdeletevisible(SCDS_COPY|(g_fVizCutCopyAppend?SCDS_COPYAPPEND:0)|SCDS_DELETE,'+');}
 EXTERNC PFUNCPLUGINCMD pfvizcopyinvisible(void)   {copycutdeletevisible(SCDS_COPY|(g_fVizCutCopyAppend?SCDS_COPYAPPEND:0),'-');}
 EXTERNC PFUNCPLUGINCMD pfvizcutinvisible(void)    {copycutdeletevisible(SCDS_COPY|(g_fVizCutCopyAppend?SCDS_COPYAPPEND:0)|SCDS_DELETE,'-');}
 BOOL g_fVizPasteRetainsPosition=FALSE;
 EXTERNC void VizPaste(unsigned flags) {
   INT_CURRENTEDIT; GET_CURRENTEDIT;
   unsigned txsz;
   char *tx;
   BOOL isrectangular;
 
   if ((tx=strdupClipboardText(&txsz,flags|
       (g_fVizPasteBinary?SCDS_COPYPASTEBINARY:0)|
       (g_fVizPasteToEditorEOL?SCDS_PASTETOEDITOREOL:0)|
       (IsScintillaUnicode(currentEdit)?SCDS_UNICODEMODE:0)
       ,SENDMSGTOCED(currentEdit, SCI_GETEOLMODE, 0, 0),&isrectangular))) {
-    int curpos=0; if (g_fVizPasteRetainsPosition) curpos=SENDMSGTOCED(currentEdit, SCI_GETCURRENTPOS, 0, 0);
+    Sci_Position curpos=0; if (g_fVizPasteRetainsPosition) curpos=SENDMSGTOCED(currentEdit, SCI_GETCURRENTPOS, 0, 0);
     if (isrectangular) {
       SENDMSGTOCED(currentEdit, SCI_PASTE, 0, 0); // we can't handle binary rectangular text and may never need to
     } else {
       SENDMSGTOCED(currentEdit, SCI_REPLACESEL, 0, "");
       SENDMSGTOCED(currentEdit, SCI_ADDTEXT, txsz, tx);
     }
     freesafe(tx,"pfVizPaste");
     if (!g_fVizPasteRetainsPosition) curpos=SENDMSGTOCED(currentEdit, SCI_GETCURRENTPOS, 0, 0);
     SENDMSGTOCED(currentEdit, SCI_GOTOPOS, curpos, 0);
   }
 }
 EXTERNC PFUNCPLUGINCMD pfVizPasteUTF8(void)    { VizPaste(SCDS_PASTEANSIUTF8); }
 EXTERNC PFUNCPLUGINCMD pfVizPasteUNICODE(void) { VizPaste(0); }
 
 // SUBSECTION: End
 #if ENABLE_PUSHPOP /* SUBSECTION: Poplists */
 /* new feature: this needs a CRC-32 hash path instead of the real path */
 struct _POPLISTS {
   char path[MAX_PATH];
   unsigned mru;
   unsigned poplist[30];
   unsigned popcount;
   unsigned poptextlen;
 } g_PopLists[5];
 unsigned g_uPopListNo;
@@ -7055,98 +7055,93 @@ struct FuncItem funcItem[]={
 #if NPPDEBUG /* { it wasn't automatic at first */
 {NPPTEXT("Q:(Experimental) Temp Function"),pftemp,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:(Experimental) Display Clipboard Info"),pfinsertclipinfo,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("Q:Convert EOLs")),pfconverteol,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:(Experimental) Insert Menu Info"),pfshowmenuinfo,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:(Experimental) ReSave"),pfSave,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:(Experimental) ReLoad"),pfReLoad,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:(Experimental) Insert Unicode Caps Tables"),pfInsertUnicodeCapsTables,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:(Experimental) Clipboard GlobalAlloc size test"),pfclipboardsizetest,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("Q:(Experimental) Build New Menu"),pfbuildmenu,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("Q:(Experimental) Display wID"),pfdisplaywIDtest,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("Q:(Experimental) Build Dynamic Menus"),buildallIDLOOKUP,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("Q:(Experimental) Destroy Dynamic Menus"),freeallIDLOOKUP,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:About (Experimental) Tools"),pfAboutExperimental,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)}, // Notepad++ does not allow NULL functions so we pick a dummy
 #endif /* } */
 {NPPTEXT("Convert quotes to \""),pfconvert1q2q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Convert quotes to '"),pfconvert2q1q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Swap quotes (\" <-> ')"),pfconvertqtswap,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Drop quotes \" && '"),pfconvertqtdrop,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)}, // Notepad++ does not allow NULL functions so we pick a dummy
 {NPPTEXT("Escape \" to \\\""),pfconvertescapesq,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Escape ' to \\'"),pfconvertescape1qs1q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Escape ' to \\\""),pfconvertescape1qsq,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Escape both \"&&' to \\\"&&\\'"),pfconvertescapeboth,0,FALSE NPPPLUGINACCELERATOR(NULL)},
-#ifdef X86
 {NPPTEXT("unEscape \\\" to \""),pfconvertunescapesq,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("unEscape \\' to '"),pfconvertunescapes1q1q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("unEscape \\\" to '"),pfconvertunescapesq1q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("unEscape both \\\"&&\\' to \"&&'"),pfconvertunescapeboth,0,FALSE NPPPLUGINACCELERATOR(NULL)},
-#endif
 {NPPTEXT("Escape \" to \"\""),pfconvertescape2q22q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Escape ' to \"\""),pfconvertescape1q22q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
-#ifdef X86
 {NPPTEXT("unEscape \"\" to \""),pfconvertunescape22q2q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("unEscape \"\" to '"),pfconvertunescape22q1q,0,FALSE NPPPLUGINACCELERATOR(NULL)},
-#endif
 {NPPTEXT("-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("UPPER CASE"),pfconvertuppercase,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("lower case"),pfconvertlowercase,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Proper Case"),pfconvertpropercase,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Sentence case."),pfconvertsentencecase,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("iNVERT cASE"),pfconvertinvertcase,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Zap all characters to space"),pfzapspace,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Zap all non printable characters to #"),pfzapnonprint,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:Mark Word or Find Reverse")/*NPPTEXT(" ????")*/,pfMarkWordFindReverse,0,FALSE NPPPLUGINACCELERATOR(/*&skMarkWordFindReverse*/NULL)},
 {NPPTEXT("Q:Mark Word or Find Forward"),pfMarkWordFindForward,0,FALSE  NPPPLUGINACCELERATOR(/*&skMarkWordFindForward*/NULL)},
 {NPPTEXT("Q:+Mark Word or Find Case Sensitive"),pfMarkWordFindCaseSensitive,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:+Mark Word or Find Whole Words"),pfMarkWordFindWholeWord,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("Q:Show Style"),pfshowstyle,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("Q:Find In Other View"),pffindinotherview,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("Q:Switch selection to rectangular"),pfswitchseltorectangular,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:Find matching {([<Brace>])}"),pffindmatchchar,0,FALSE  NPPPLUGINACCELERATOR(&skfindmatchchar)},//Ctrl-B in Notepad++
 {NPPTEXT("Q:Mark to matching {([<Brace>])}"),pfmarkmatchchar,0,FALSE  NPPPLUGINACCELERATOR(/*&skmarkmatchchar*/NULL)},
 {NPPTEXT("Q:Delete Marked {([<Brace>])} Pair"),pfdeletebracepair,0,FALSE  NPPPLUGINACCELERATOR(/*&skdeletebracepair*/NULL)},
 //{NPPTEXT("Q:Delete Between Marked {([<Brace>])} Pair"),pfdeletebracepaircontents,0,FALSE  NPPPLUGINACCELERATOR(/*&skdeletebracepaircontents*/NULL)},
 {NPPTEXT("Q:Mark lines to matching {([<Brace>])}"),pfmarkmatchline,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 #if ENABLE_AutoShowMatchline
 {NPPTEXT("Q:Show line matching Brace])}"),pfshowmatchline,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 #endif
 #if ENABLE_FINDREPLACE
 {NPPTEXT("Q:Find/Replace"),pffindreplace,0,FALSE  NPPPLUGINACCELERATOR(&skfindreplace)},
 #endif
 {NPPTEXT("Q:Duplicate Line or Block"),pfDuplicateLineOrBlock,0,FALSE  NPPPLUGINACCELERATOR(/*&skDuplicateLineOrBlock*/NULL)},
 #if ENABLE_PUSHPOP
 {NPPTEXT("Q:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:Push position"),pfpushposition,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:Push position and jump to first occurance of (Clipboard)"),pfpushjumpposition,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("Q:Recall/Pop position"),pfpopposition,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 #endif
 //{NPPTEXT("V:Show/Hide 'All' Set Line Range"),pfvizshowselectedalllines,0,FALSE NPPPLUGINACCELERATOR(NULL)}, // proposed
 //{NPPTEXT("V:Show/Hide 'All' Clear Range"),pfvizshowselectedalllines,0,FALSE NPPPLUGINACCELERATOR(NULL)}, // proposed
-#ifdef X86
 {NPPTEXT("V:Show Between-Selected or All-Reset Lines"),pfvizshowselectedalllines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Hide Between-Selected or All-Reset Lines"),pfvizhideselectedalllines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Invert Visibility Between-Selected or All Lines"),pfvizinvertselectedalllines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Hide Lines with (Clipboard) text"),pfvizhidecliplines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Hide Lines without (Clipboard) text"),pfvizhideclipclines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Show Lines with (Clipboard) text"),pfvizshowcliplines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Show Lines without (Clipboard) text"),pfvizshowclipclines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Show More Lines around my position..."),pfvizshowmorelines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Hide/Show sequence all steps"),pfvizsequenceall,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Hide/Show sequence singlestep start"),pfvizsequencestart,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Hide/Show sequence singlestep next"),pfvizsequencenext,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Hide/Show sequence singlestep rest"),pfvizsequencerest,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Select as Hide/Show sequence"),pfvizselectassequence,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Insert Show/Hide Sequence"),pfvizinsertsequence,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Copy Visible Selection"),pfvizcopyvisible,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Cut Visible Selection"),pfvizcutvisible,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Delete Visible Selection"),pfvizdeletevisible,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Copy Invisible Selection"),pfvizcopyinvisible,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Cut Invisible Selection"),pfvizcutinvisible,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Delete Invisible Selection"),pfvizdeleteinvisible,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("V:Copy Entire Selection (no append)"),pfcopyallnoappend,0,FALSE  NPPPLUGINACCELERATOR(/*&skcopyallnoappend*/NULL)},
 {NPPTEXT("V:Cut Entire Selection (no append)"),pfcutallnoappend,0,FALSE  NPPPLUGINACCELERATOR(/*&skcutallnoappend*/NULL)},
 {NPPTEXT("V:Copy && Append Entire Selection"),pfcopyallappend,0,FALSE  NPPPLUGINACCELERATOR(/*&skcopyallappend*/NULL)},
@@ -7172,89 +7167,86 @@ struct FuncItem funcItem[]={
 {NPPTEXT("E:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Reindent C++ code"),pfreindentcode,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Leading space to tabs or tabs to spaces"),pfspace2tabs,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Leading space to tabs or tabs to spaces width=8"),pfspace2tabs8,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Trim Trailing Spaces"),pftrimtrailingspace,0,FALSE NPPPLUGINACCELERATOR(NULL)}, // Notepad++ 3.2 is slow and only trims the entire file
 {NPPTEXT("E:Indent text sticky left margin"),pfindentlines,0,FALSE  NPPPLUGINACCELERATOR(/*&skindentlines*/NULL)},
 {NPPTEXT("E:Indent && surround { text lines }"),pfindentlinessurround,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Delete Blank Lines"),pfdeleteblanklines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Delete Surplus Blank Lines"),pfdeleteblanklines2,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("E:Delete Every Other Line"),pfdeleteevery2lines,0,FALSE NPPPLUGINACCELERATOR(NULL)}, // completely handled by viz now
 {NPPTEXT("E:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Strip unquoted text (VB) separate by (Clipboard<=20)"),pffindqtstringvb,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Strip unquoted text (C) separate by (Clipboard<=20)"),pffindqtstringc,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Kill unquoted (VB) whitespace"),pfkillwhitenonqtvb,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Kill unquoted (C) whitespace"),pfkillwhitenonqtc,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Split lines at (clipboard character) or , (VB)"),pfsplitlinesatchvb,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Split lines at (clipboard character) or , (C)"),pfsplitlinesatchc,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Line up multiple lines by (,)"),pflineupcomma,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Line up multiple lines by (=)"),pflineupequals,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Line up multiple lines by (Clipboard Character)"),pflineupclipboard,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:Unwrap Text"),pfunwraptext,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("E:ReWrap Text to (Clipboard or 72) width"),pfrewraptext,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("E:Extend selection as rectangular to end of file"),pfextendblock,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("E:Pad rectangular selection with spaces"),pfextendblockspaces,0,FALSE NPPPLUGINACCELERATOR(NULL)},
-#endif
 {NPPTEXT("C:Encode URI Component"),pfencodeURIcomponent,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Encode HTML (&&<>\")"),pfencodeHTML,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Strip HTML tags table tabs"),pfstripHTMLtags,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Strip HTML tags table nontabs"),pfstripHTMLnotabs,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("C:Submit to W3C HTML Validator"),pfsubmitHTML,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("C:Submit to W3C CSS Validator"),pfsubmitCSS,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert text to code command(\"text=\\\"value\\\"\");"),pfprepostpendlines,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert Decimal Number to Binary"),pfdecimal2binary,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert Decimal Number to Octal"),pfdecimal2octal,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert Decimal Number to Hex"),pfdecimal2hex,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert Hex Number to Decimal"),pfhex2decimal,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert Octal Number to Decimal"),pfoctal2decimal,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert Binary Number to Decimal"),pfbinary2decimal,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert C-style Number to Decimal"),pfcnum2decimal,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert text to Hex-16"),pftohex16,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert text to Hex-32"),pftohex32,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert text to Hex-64"),pftohex64,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert text to Hex-128"),pftohex128,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert hex byte runs into LE-WORDS"),pfhexbyterunstolittlendian2,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert hex byte runs into LE-DWORDS"),pfhexbyterunstolittlendian4,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert LE-words to hex byte runs"),pflittlendiantohexbyteruns,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert Hex to text"),pffromhex,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:ROT13 Text"),pfrot13,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert EBCDIC to ASCII"),pfEBCDIC2ascii,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert ASCII to EBCDIC"),pfascii2EBCDIC,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert KOI8_R to CP1251"),pfKOI8_Rtocp1251,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("C:Convert CP1251 to KOI8_R"),pfcp1251toKOI8_R,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:Sort lines case sensitive (at column)"),pfqsortlinesc,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:Sort lines case insensitive (at column)"),pfqsortlinesnc,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:+Sort ascending"),pfSortAscending,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:+Sort outputs only UNIQUE (at column) lines"),pfSortLinesUnique,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:Insert Ascii Chart or Character"),pfinsertasciichart,0,FALSE NPPPLUGINACCELERATOR(NULL)},
-#ifdef X86
 {NPPTEXT("T:Insert Ruler"),pfinsertruler,0,FALSE NPPPLUGINACCELERATOR(NULL)},
-#endif
 {NPPTEXT("T:Insert Line Numbers"),pfinsertlinenumbers,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:Delete Line Numbers or First Word"),pfdeletefirstword,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("T:Clean eMail >Quoting"),pfcleanemailquoting,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:UUdecode"),pfuudecode,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:Base64 Decode"),pfbase64decode,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:Word Count"),pfwordcount,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:Add up numbers"),pfaddup,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:-"),pfdummy,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("T:Empty Undo Buffer (be sure to save)"),pfemptyundobuffer,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("I:Current Full Path"),pfinsertCurrentFullPath,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("I:Current File Name"),pfinsertCurrentFileName,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("I:Current Directory"),pfinsertCurrentDirectory,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 {NPPTEXT("I:Date && Time - short format"),pfinsertShortDateTime,0,FALSE NPPPLUGINACCELERATOR(/*&skinsertShortDateTime*/NULL)},
 {NPPTEXT("I:Date && Time - long format"),pfinsertLongDateTime,0,FALSE NPPPLUGINACCELERATOR(NULL)},
 #ifndef HighPerformance
 {NPPTEXT("S:+Go Faster, use more memory"),pfHighPerformance,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 #endif
 {NPPTEXT("S:+Cancel Overwrite Mode moving from current line"),pfBlockOverwrite,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("S:+Autoclose XHTML/XML <Tag>"),pfAutoCloseHTMLtag,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("S:+Autoclose {([Brace"),pfAutoCloseBrace,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 //{NPPTEXT("S:+Autoconvert typed leading spaces to tabs"),pfAutoSpace2Tab,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 #if ENABLE_AutoShowMatchline
 {NPPTEXT("S:+Autoshow line matching Brace])}"),pfAutoShowMatchline,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 #endif
 //{NPPTEXT("S:+Autoconvert typed HTML/XML to &&entities;"),pfAutoConvertHTML,0,TRUE  NPPPLUGINACCELERATOR(NULL)},
 
EOF
)